<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options Chain - Nubra</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="dashboard-styles.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo">
                <img src="https://via.placeholder.com/50x50?text=N" alt="Nubra Logo">
            </div>
            <h1>Nubra</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#support">Support</a></li>
                <li><a href="#apis">Nubra APIs</a></li>
                <li><a href="#" class="cta-button">Open Demat <i class="fas fa-arrow-right"></i></a></li>
            </ul>
        </nav>
    </header>

    <main class="dashboard-container">
        <div class="dashboard-header">
            <h2>Enhanced Options Chain</h2>
            <p class="subtitle">Simplified options view with color-coded ITM/OTM/ATM for better decisions.</p>
        </div>

        <section class="options-dashboard">
            <div class="options-controls">
                <div class="symbol-selector">
                    <select id="symbolSelector">
                        <option value="NIFTY" selected>NIFTY</option>
                        <option value="BANKNIFTY">BANKNIFTY</option>
                        <option value="RELIANCE">RELIANCE</option>
                        <option value="INFY">INFY</option>
                        <option value="TCS">TCS</option>
                    </select>
                    <div class="symbol-info">
                        <div class="spot-price">19,842.25 <span class="up">+0.82%</span></div>
                    </div>
                </div>
                
                <div class="expiry-selector">
                    <select id="expirySelector">
                        <option value="15OCT2025" selected>15 Oct 2025</option>
                        <option value="29OCT2025">29 Oct 2025</option>
                        <option value="13NOV2025">13 Nov 2025</option>
                        <option value="27NOV2025">27 Nov 2025</option>
                    </select>
                </div>
            </div>
            
            <div class="options-view">
                <div class="view-selector">
                    <button class="view-btn active" data-view="standard">Standard</button>
                    <button class="view-btn" data-view="iv">IV Profile</button>
                    <button class="view-btn" data-view="oi">OI Analysis</button>
                </div>
                
                <div class="options-header">
                    <h3>NIFTY 19,800 CE | 15 Oct 2025 | IV: 18.2% <span class="up">â†‘</span></h3>
                </div>
                
                <div class="options-chain">
                    <div class="chain-header">
                        <div class="calls-header">
                            <div class="cell">LTP</div>
                            <div class="cell">Chg%</div>
                            <div class="cell">OI</div>
                            <div class="cell">IV</div>
                        </div>
                        <div class="strike-header">
                            <div class="cell">Strike</div>
                        </div>
                        <div class="puts-header">
                            <div class="cell">LTP</div>
                            <div class="cell">Chg%</div>
                            <div class="cell">OI</div>
                            <div class="cell">IV</div>
                        </div>
                    </div>
                    
                    <div class="chain-rows" id="optionsChainRows">
                        <!-- Row for 19,700 -->
                        <div class="chain-row itm">
                            <div class="calls-data">
                                <div class="cell highlight">145</div>
                                <div class="cell up">+3.2%</div>
                                <div class="cell">2.1L</div>
                                <div class="cell">17.2%</div>
                            </div>
                            <div class="strike-data">
                                <div class="cell">19,700</div>
                                <div class="strike-bar">
                                    <div class="bar-level" style="width: 70%"></div>
                                </div>
                            </div>
                            <div class="puts-data">
                                <div class="cell">89</div>
                                <div class="cell down">-1.3%</div>
                                <div class="cell">1.8L</div>
                                <div class="cell">16.8%</div>
                            </div>
                        </div>
                        
                        <!-- Row for 19,750 -->
                        <div class="chain-row itm">
                            <div class="calls-data">
                                <div class="cell highlight">118</div>
                                <div class="cell up">+2.5%</div>
                                <div class="cell">1.8L</div>
                                <div class="cell">17.5%</div>
                            </div>
                            <div class="strike-data">
                                <div class="cell">19,750</div>
                                <div class="strike-bar">
                                    <div class="bar-level" style="width: 80%"></div>
                                </div>
                            </div>
                            <div class="puts-data">
                                <div class="cell">102</div>
                                <div class="cell down">-1.8%</div>
                                <div class="cell">2.1L</div>
                                <div class="cell">17.1%</div>
                            </div>
                        </div>
                        
                        <!-- Row for 19,800 - ATM -->
                        <div class="chain-row atm">
                            <div class="calls-data">
                                <div class="cell">98</div>
                                <div class="cell up">+1.9%</div>
                                <div class="cell highlight">3.2L</div>
                                <div class="cell highlight">18.2%</div>
                            </div>
                            <div class="strike-data">
                                <div class="cell highlight">19,800</div>
                                <div class="strike-bar">
                                    <div class="bar-level" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="puts-data">
                                <div class="cell">134</div>
                                <div class="cell up">+2.1%</div>
                                <div class="cell highlight">2.9L</div>
                                <div class="cell highlight">18.5%</div>
                            </div>
                        </div>
                        
                        <!-- Row for 19,850 -->
                        <div class="chain-row otm">
                            <div class="calls-data">
                                <div class="cell">82</div>
                                <div class="cell up">+1.5%</div>
                                <div class="cell">2.4L</div>
                                <div class="cell">17.9%</div>
                            </div>
                            <div class="strike-data">
                                <div class="cell">19,850</div>
                                <div class="strike-bar">
                                    <div class="bar-level" style="width: 65%"></div>
                                </div>
                            </div>
                            <div class="puts-data">
                                <div class="cell highlight">156</div>
                                <div class="cell up">+2.8%</div>
                                <div class="cell">2.6L</div>
                                <div class="cell">18.1%</div>
                            </div>
                        </div>
                        
                        <!-- Row for 19,900 -->
                        <div class="chain-row otm">
                            <div class="calls-data">
                                <div class="cell">67</div>
                                <div class="cell up">+0.8%</div>
                                <div class="cell">1.9L</div>
                                <div class="cell">17.4%</div>
                            </div>
                            <div class="strike-data">
                                <div class="cell">19,900</div>
                                <div class="strike-bar">
                                    <div class="bar-level" style="width: 40%"></div>
                                </div>
                            </div>
                            <div class="puts-data">
                                <div class="cell highlight">189</div>
                                <div class="cell up">+3.5%</div>
                                <div class="cell">2.1L</div>
                                <div class="cell">18.3%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="options-filters">
                    <button id="quickFilters" class="filter-btn">Quick Filters</button>
                    <button id="atmFilter" class="filter-btn">ATM Â±5</button>
                    <button id="highVolumeFilter" class="filter-btn">High Volume</button>
                    <button id="expiryFilter" class="filter-btn active">Expiry: 15Oct</button>
                </div>
            </div>
        </section>

        <section class="options-analysis">
            <div class="analysis-tabs">
                <button class="tab-btn active" data-tab="pcr">PCR Analysis</button>
                <button class="tab-btn" data-tab="max-pain">Max Pain</button>
                <button class="tab-btn" data-tab="iv-skew">IV Skew</button>
            </div>
            
            <div class="analysis-content active" id="pcrContent">
                <div class="analysis-chart">
                    <h4>Put-Call Ratio (PCR)</h4>
                    <div class="chart-placeholder">
                        <div class="pcr-value">0.92</div>
                        <div class="pcr-bar">
                            <div class="pcr-level" style="width: 46%"></div>
                        </div>
                        <div class="pcr-labels">
                            <span>0.5</span>
                            <span>1.0</span>
                            <span>1.5</span>
                        </div>
                    </div>
                    <p class="analysis-insight">Current PCR of 0.92 indicates slightly bearish sentiment but close to neutral.</p>
                </div>
            </div>
            
            <div class="analysis-content" id="maxPainContent">
                <div class="analysis-chart">
                    <h4>Max Pain Point</h4>
                    <div class="chart-placeholder">
                        <div class="max-pain-value">19,750</div>
                        <div class="max-pain-indicator"></div>
                        <div class="max-pain-labels">
                            <span>19,600</span>
                            <span>19,750</span>
                            <span>19,900</span>
                        </div>
                    </div>
                    <p class="analysis-insight">Max pain at 19,750 suggests potential gravitational pull toward this level at expiry.</p>
                </div>
            </div>
            
            <div class="analysis-content" id="ivSkewContent">
                <div class="analysis-chart">
                    <h4>Implied Volatility Skew</h4>
                    <div class="chart-placeholder">
                        <div class="iv-skew-chart">
                            <div class="iv-point" style="--x: 10%; --y: 65%;" data-strike="19,600"></div>
                            <div class="iv-point" style="--x: 25%; --y: 55%;" data-strike="19,700"></div>
                            <div class="iv-point" style="--x: 40%; --y: 48%;" data-strike="19,800"></div>
                            <div class="iv-point" style="--x: 55%; --y: 52%;" data-strike="19,900"></div>
                            <div class="iv-point" style="--x: 70%; --y: 58%;" data-strike="20,000"></div>
                            <div class="iv-point" style="--x: 85%; --y: 65%;" data-strike="20,100"></div>
                        </div>
                    </div>
                    <p class="analysis-insight">Volatility smile indicates higher perceived risk for far OTM options.</p>
                </div>
            </div>
        </section>

        <section class="action-buttons">
            <button id="placeOrder" class="dashboard-button primary">
                <i class="fas fa-shopping-cart"></i>
                Place Option Order
            </button>
            <button id="createStrategy" class="dashboard-button secondary">
                <i class="fas fa-layer-group"></i>
                Create Strategy
            </button>
            <button id="downloadData" class="dashboard-button secondary">
                <i class="fas fa-download"></i>
                Export Chain Data
            </button>
            <a href="index.html" class="dashboard-button outline">
                <i class="fas fa-home"></i>
                Back to Home
            </a>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="https://via.placeholder.com/50x50?text=N" alt="Nubra Logo">
                <h3>Nubra</h3>
            </div>
            <div class="footer-links">
                <div class="link-column">
                    <h4>Platform</h4>
                    <a href="#">Demat Account</a>
                    <a href="#">Mobile App</a>
                    <a href="#">Features</a>
                    <a href="#">Pricing</a>
                </div>
                <div class="link-column">
                    <h4>Resources</h4>
                    <a href="#">Documentation</a>
                    <a href="#">API Reference</a>
                    <a href="#">Blog</a>
                    <a href="#">Community</a>
                </div>
                <div class="link-column">
                    <h4>Company</h4>
                    <a href="#">About Us</a>
                    <a href="#">Careers</a>
                    <a href="#">Contact</a>
                    <a href="#">Press</a>
                </div>
                <div class="link-column">
                    <h4>Legal</h4>
                    <a href="#">Terms of Service</a>
                    <a href="#">Privacy Policy</a>
                    <a href="#">Security</a>
                    <a href="#">Compliance</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Nubra Financial Technologies Ltd. All rights reserved.</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Filter buttons functionality
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // If it's the quick filters button, show a dropdown menu (simulated with alert)
                    if (this.id === 'quickFilters') {
                        alert('Quick filters: ITM Only, OTM Only, High IV, High OI Change');
                        return;
                    }
                    
                    // Toggle active state
                    this.classList.toggle('active');
                    
                    // Apply filter effect
                    applyFilter(this.id, this.classList.contains('active'));
                });
            });
            
            // Tab switching functionality
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.analysis-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + 'Content').classList.add('active');
                });
            });
            
            // View switching functionality
            const viewButtons = document.querySelectorAll('.view-btn');
            
            viewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all view buttons
                    viewButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Switch view (simulated)
                    const viewType = this.getAttribute('data-view');
                    alert('Switching to ' + viewType + ' view');
                });
            });
            
            // Symbol selector functionality
            document.getElementById('symbolSelector').addEventListener('change', function() {
                const symbol = this.value;
                alert('Loading options chain for ' + symbol);
                // In a real app, this would fetch and update the options chain
            });
            
            // Expiry selector functionality
            document.getElementById('expirySelector').addEventListener('change', function() {
                const expiry = this.value;
                document.getElementById('expiryFilter').textContent = 'Expiry: ' + expiry.substring(0, 5);
                alert('Loading options for expiry: ' + expiry);
                // In a real app, this would fetch and update the options chain
            });
            
            // Place order button functionality
            document.getElementById('placeOrder').addEventListener('click', function() {
                alert('Opening order placement form...');
                // In a real app, this would open an order form
            });
            
            // Create strategy button functionality
            document.getElementById('createStrategy').addEventListener('click', function() {
                alert('Opening strategy builder...');
                // In a real app, this would open a strategy builder
            });
            
            // Download data button functionality
            document.getElementById('downloadData').addEventListener('click', function() {
                alert('Exporting options chain data to CSV...');
                // In a real app, this would download data
            });
            
            // Simulate filter application
            function applyFilter(filterId, isActive) {
                const rows = document.querySelectorAll('.chain-row');
                
                switch(filterId) {
                    case 'atmFilter':
                        if (isActive) {
                            alert('Showing only strikes near ATM (Â±5 strikes)');
                            // In a real app, this would filter the rows
                        } else {
                            alert('Showing all strikes');
                        }
                        break;
                    case 'highVolumeFilter':
                        if (isActive) {
                            alert('Showing only high volume options');
                            // In a real app, this would filter the rows
                        } else {
                            alert('Showing all volume levels');
                        }
                        break;
                    case 'expiryFilter':
                        // This is always active, it's showing the current expiry
                        break;
                }
            }
            
            // Initialize IV skew chart points with tooltips
            const ivPoints = document.querySelectorAll('.iv-point');
            ivPoints.forEach(point => {
                point.addEventListener('mouseover', function() {
                    const strike = this.getAttribute('data-strike');
                    const tooltip = document.createElement('div');
                    tooltip.className = 'iv-tooltip';
                    tooltip.textContent = `Strike ${strike}: IV ${Math.floor(Math.random() * 5) + 16}%`;
                    
                    // Position the tooltip
                    tooltip.style.left = `calc(${getComputedStyle(this).getPropertyValue('--x')})`;
                    tooltip.style.top = `calc(${getComputedStyle(this).getPropertyValue('--y')} - 30px)`;
                    
                    this.appendChild(tooltip);
                });
                
                point.addEventListener('mouseout', function() {
                    const tooltip = this.querySelector('.iv-tooltip');
                    if (tooltip) {
                        tooltip.remove();
                    }
                });
            });
        });
    </script>
</body>
</html>